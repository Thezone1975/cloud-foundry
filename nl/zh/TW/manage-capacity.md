---

copyright:
  years: 2018
lastupdated: "2019-01-15"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}

# 資源用量

管理者及開發人員可以查看應用程式及 Cell 使用 CFEE 資源容量（記憶體及 CPU）的情況。若要監視 CFEE 實例中的資源用量，請執行下列動作：

1. 移至 [{{site.data.keyword.Bluemix_notm}} Cloud Foundry 儀表板](https://console.bluemix.net/dashboard/cloudfoundry?filter=cf_environments)，並開啟您要管理資源用量的 {{site.data.keyword.cfee_full_notm}}。
2. 在 {{site.data.keyword.cfee_full_notm}} 使用者介面中，移至左導覽窗格中的**資源用量**項目，以開啟_資源用量_ 頁面。在_資源用量_ 頁面下，您可以移至_應用程式_ 或 _Cell_ 子項目來開啟對應的頁面。_應用程式_ 及 _Cell_ 頁面中顯示的資訊可以視為細分資源用量的兩種方式：
   * **應用程式**頁面會依跨實例聚集的應用程式來分析資源用量。
   * **Cell** 頁面顯示特定 Cell 上執行之應用程式實例的資源用量。跨 Cell 的資源用量模式可讓您深入瞭解容量及負載分佈。例如，它可能有助於找出應用程式負載平衡的問題（例如，應用程式在各 Cell 之間使用的資源有大量差異），或是資源用量接近整體容量的問題（亦即在所有 Cell 中有很大的資源用量百分比）。

**附註：**資源用量資料代表最近 5 分鐘收集週期期間的資源用量。按一下頁面頂端的**重新整理資料**，即可重新整理資源用量資料。

## 應用程式
{: #usage_apps}

「應用程式」頁面有兩個區段：
1. 水平軸圖，顯示實體和保留記憶體用量。
   * 下表中**選取的應用程式**使用的保留和實體記憶體。
   * CFEE 實例中**所有應用程式**使用的保留和實體記憶體。
   * **系統**使用的實體記憶體，包含 Cloud Foundry 控制平面使用的記憶體，以及 Cloud Foundry 控制平面快取的應用程式記憶體。
   * CFEE 實例中的**總計可用**保留和實體記憶體。
   
   **附註：**當應用程式保留的記憶體比實體可用記憶體還多時，會顯示保留記憶體長條圖的紅色虛線外框，以代表選取的應用程式過度保留的記憶體量。

   若要顯示代表表格中所有應用程式或所選取應用程式使用之記憶體百分比的數字，請將游標移至圖表對應部分上方。將游標移至圖表的*所有應用程式* 部分上方，會顯示 CFEE 中所有應用程式使用的記憶體百分比（相對於總計可用記憶體）。將游標移至圖表的*所選取應用程式* 部分上方，會顯示表格中所選取應用程式使用的記憶體百分比（相對於總計可用記憶體）。

2. 列出所有應用程式的表格。表格中的每一列都會顯示該應用程式的資源資訊。展開列即會顯示該應用程式各種實例的資源用量資訊。

  表格中的第一欄是一個勾選框，可決定是否要將對應的應用程式，包含在頁面頂端圖表中要包含的*選取的應用程式* 集合內。若要在選取的集合中包含（或排除）應用程式，請按一下對應的勾選框。選取或取消選取要包含在集合中的應用程式時，會重新整理圖形。長條圖右側的_選取的應用程式_ 圖註，指出目前選取要包含在圖形中的應用程式數目（括弧中的數字）。

  下列資訊會顯示為應用程式表格中的直欄：
   * **應用程式名稱**：應用程式或應用程式實例的名稱。如果使用者無權存取應用程式，則會改為顯示應用程式 GUID。
   * **實例**：針對應用程式，它代表執行中實例的數目。針對應用程式實例（展開應用程式列時顯示於應用程式名稱下方），它代表應用程式實例執行所在 Cell 的名稱。
   * **總實體記憶體**：應用程式之所有實例使用的實體記憶體 MB 數。應用程式所使用的實體記憶體，等於所有應用程式實例使用的實體記憶體總和。
   * **總保留記憶體**：應用程式之所有實例保留的記憶體 MB 數。應用程式所保留的記憶體，等於所有應用程式實例保留的記憶體總和。
   * **平均 CPU（Cell 百分比）**：針對應用程式實例，度量值代表**其執行所在 Cell 內**的平均 CPU。針對應用程式，它代表其實例平均值的平均 CPU 使用率。
   * **最大 CPU（Cell 百分比）**：針對應用程式實例，度量值代表**其執行所在 Cell 內**該實例所使用的最大 CPU。針對應用程式，它代表其實例最大 CPU 使用率最高值。
   * **CPU（系統百分比）**：應用程式及其實例所使用之 CFEE 中的總計可用 CPU 百分比。應用程式所使用的 CPU，等於所有應用程式實例使用的 CPU 百分比總和。
   * **要求數**：在最新資料收集循環期間（五分鐘），應用程式的要求數目。
   * **組織**：應用程式部署所在的組織。如果使用者不是組織的成員，則會改為顯示組織 GUID。

展開表格中的應用程式列，以查看應用程式實例及其對應資源用量度量值的清單。

### 過濾應用程式
您可以透過表格上方的**應用程式**及**組織**過濾器下拉清單，來過濾表格的內容。

此外，您也可以使用表格上方的過濾器項目欄位，只顯示與您在過濾器欄位所輸入字串相符的應用程式。此過濾器會同時反映在表格及其上方的圖表中。

**附註：**過濾器運作時會獨立於選取的表格列（透過第一欄表格中的勾選框），以包含在上方圖表所包含的_選取的應用程式_ 集合。例如，如果 CFEE 環境中共有 10 個應用程式，並選取其中 5 個以包含在圖表中，則在您套用只符合一個應用程式實例的過濾器時，表格中只會出現該應用程式實例。此外，_選取的應用程式_ 集合現在只會包含該相符應用程式，並且會相應地重新整理圖表。當您移除過濾器時，會在表格中再次顯示所有 10 個應用程式，_選取的應用程式_ 集合也會重設為包含所有應用程式。


## Cell
{: #usage_cells}

Cell 頁面有兩個區段：
1. 垂直長條圖，其中顯示：
   * CFEE 實例中的*總計可用* 記憶體及可用 CPU。
   * CFEE 實例中**選取的應用程式實例** 使用的記憶體及 CPU。
   * CFEE 實例中**所有應用程式實例** 使用的記憶體及 CPU。
   * 下表中**系統**所使用的記憶體及 CPU。系統用量代表 CFEE 服務元件項目加上應用程式快取所使用的資源。
   * Cell 中可用的總記憶體和 CPU。**總計 Cell** 等於 Kubernetes 工作者節點（Cell 佈建處）中可用的總計（記憶體或 CPU），減掉系統所使用的量。

   若要顯示表格中所有應用程式實例或所選取應用程式實例使用的記憶體或 CPU 百分比，請將游標移至圖表對應部分上方。將游標移至圖表條欄上方，會顯示可用的絕對記憶體或 CPU、所有應用程式使用的記憶體或 CPU，以及系統 + 快取所使用的記憶體或 CPU。它也會顯示所有應用程式使用的記憶體或 CPU 百分比，以及系統 + 快取所使用的記憶體或 CPU 百分比（相對於總計可用記憶體或 CPU）。

2. 此表格列出所有 Cell 以及其中執行的應用程式實例。表格中的每一列都會顯示該 Cell 及應用程式實例的資源資訊。

  表格中的第一欄是一個勾選框，可決定是否要將對應的應用程式實例，包含在頁面頂端圖表中要包含的*選取的應用程式實例* 集合內。若要在選取的集合中包含（或排除）應用程式實例，請按一下對應的勾選框。選取或取消選取要包含在集合中的應用程式實例時，會重新整理圖形。

  下列資訊會顯示為表格中的直欄：
   * **Cell 名稱**：Cell 的名稱。
   * **應用程式名稱**：Cell 上執行的應用程式名稱。如果使用者無權存取應用程式，則會改為顯示應用程式 GUID。
   * **實例**：Cell 上執行的應用程式實例數目。
   * **實體記憶體**：Cell 中執行之應用程式實例所使用的實體記憶體 MB 數。
   * **保留記憶體**：Cell 中執行之應用程式實例所保留的記憶體 MB 數。
   * **CPU（Cell 的 %）**：Cell 上執行之應用程式實例所使用 CFEE 中的總計可用 CPU 百分比。

### 過濾 Cell 及應用程式實例
您可以透過表格上方的 **Cell** 過濾器下拉清單，並選取要在表格中顯示的 Cell，來過濾表格的內容。

此外，您也可以使用表格上方的過濾器項目欄位，只顯示與您在過濾器欄位所輸入字串相符的應用程式實例。此過濾器會同時反映在表格及其上方的圖表中。

**附註：**過濾器運作時會獨立於選取的表格列（透過第一欄表格中的勾選框），以包含在上方圖表所包含的_選取的應用程式實例_ 集合。例如，如果 CFEE 環境中共有 10 個應用程式實例，並選取其中 5 個以包含在圖表中，則在您套用只符合一個應用程式實例的過濾器時，表格中只會出現該應用程式實例。此外，_選取的應用程式實例_ 集合現在只會包含該應用程式實例，並且會相應地重新整理圖表。當您移除過濾器時，會在表格中再次顯示所有 10 個應用程式實例，並將_選取的應用程式實例_ 集合重設為包含所有應用程式實例。

## 記憶體度量值
{: #memory_metrics}

在 CFEE 中有各種類型的記憶體度量值可用。這種記憶體度量值的變化起源於可以用來分析記憶體使用率的各種角度。記憶體使用率的測量，可以相對於可供 Cloud Foundry Cell 使用的容量，或是相對於 Cell 佈建所在 Kubernetes 工作者節點的實體容量總計（這可能包含與 Cloud Foundry 無關的其他記憶體使用率）。記憶體容量可以從應用程式保留（配置）的記憶體角度來看，或是從那些應用程式實際使用的記憶體角度來看。  

以下是可供 CFEE 實例使用者使用的記憶體度量值：

* 支援 Cloud Foundry Cell 之 Kubernetes 工作者節點所使用的整體記憶體，相對於那些節點的記憶體容量總計。這同時反映了 Cloud Foundry Cell 所使用的工作者節點記憶體，以及與 Cloud Foundry 無關之系統或快取額外負擔所使用的工作者節點記憶體。這在**概觀**頁面中顯示為**整體用量**量規。
* 配置給應用程式的記憶體，相對於可用的 Cell 記憶體，而不管該記憶體實際是否使用。這在**概觀**頁面中顯示為**已配置**量規。
* 應用程式實際使用的記憶體，相對於可用的 Cell 記憶體。所使用的整體應用程式記憶體在**概觀**頁面中顯示為**應用程式用量**量規。特定應用程式使用的記憶體顯示在**資源用量 - 應用程式**頁面。
* Cloud Foundry Cell 使用的記憶體，相對於工作者節點的記憶體容量。這顯示在**資源用量 - Cell** 頁面。
* 工作者節點使用的總記憶體（不論是否與 Cloud Foundry 相關）。這顯示在兩者的**更新與擴充**頁面，不論是支援 CFEE Cell 的節點還是支援 CFEE 控制平面的節點。
* 其他記憶體度量值顯示在 Grafana 儀表板，它可以從**監視**頁面啟動。這些度量值針對 Cloud Foundry Cell 和 Kubernetes 叢集與工作者節點顯示詳細的記憶體容量及用量。
