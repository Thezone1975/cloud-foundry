---

copyright:
  years: 2018
lastupdated: "2018-09-27"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}

# アプリのデプロイおよび表示
{: #deploy_apps}

コマンド・ライン・インターフェースまたは統合開発環境 (IDE) を使用して、アプリケーションを {{site.data.keyword.Bluemix}} にデプロイすることができます。 また、アプリケーション・マニフェストを使用してアプリケーションをデプロイすることも可能です。 アプリケーション・マニフェストを使用すると、毎回 {{site.data.keyword.Bluemix_notm}} にアプリケーションをデプロイする度に指定しなければならないデプロイメント詳細の数が削減されます。
{:shortdesc}

## Cloud Foundry コマンドを使用したアプリケーションのデプロイ
{: #dep_apps}

[Cloud Foundry CLI のダウンロードとインストール](https://docs.cloudfoundry.org/cf-cli/install-go-cli.html){: new_window} ![外部リンク・アイコン](../icons/launch-glyph.svg "外部リンク・アイコン") を行います。

コマンド・ライン・インターフェースをインストールした後に、以下のステップに従います。

1. コードが置かれているディレクトリーに移動します。 `cd <your_directory>`
2. {{site.data.keyword.cfee_full}} の概要ページに移動し、環境の API エンドポイントを見つけます。
3. コマンド・ライン・インターフェースで、以下のように API エンドポイントを環境のエンドポイントに設定します。

  ```
  cf api <api_endpoint>
  ```
  {: pre}

4. 環境にログインします。

  ```
  cf login -u <username> -o <org_name> -s <space_name>
  ```
  {: pre}

  フェデレーテッド ID を使用する場合、`-sso` オプションを使用します。

  ```
  cf login -o <org_name> -s <space_name> -sso
  ```
  {: pre}

  **注**: `username`、`org_name`、および `space_name` の値にスペースが含まれている場合は、値のまわりに単一引用符または二重引用符を追加する必要があります。例えば、`-o "my org"` のように指定します。

5.  `<your_new_directory>` から、`bluemix app push` コマンドを使用してアプリを {{site.data.keyword.Bluemix_notm}} に再デプロイします。 `cf app push` コマンドについて詳しくは、『[アプリケーションのアップロード](/docs/starters/upload_app.html)』を参照してください。

  ```
  cf push <app_name>
  ```
  {: pre}

6.  `https://<app_url>.<AppDomainName>` をブラウズして、アプリにアクセスします。

## ユーザー・インターフェースでのデプロイ済みアプリケーションの表示
{: #view_apps}

特定のスペースのコンテキストで、あるいはすべての CFEE インスタンスでグローバルに、CFEE デプロイ済みアプリケーションを表示できます。

### 特定の CFEE スペースにデプロイされているアプリケーションの表示
{: #view_specific}

特定の CFEE インスタンスの特定のスペースにデプロイされているアプリケーションを表示するには、以下のようにします。
1. [{{site.data.keyword.Bluemix_notm}} ダッシュボード](https://console.bluemix.net/dashboard/apps/)に移動し、組織を作成する {{site.data.keyword.cfee_full_notm}} を開きます。
2. {{site.data.keyword.cfee_full_notm}} ユーザー・インターフェースで、ナビゲーション・ペインの**「組織」**項目に移動し、_組織_ ページを開きます。
3. ページの上部の**「スペース」**タブに移動します。
4. __「スペース」__タブで、表内のスペースをクリックしてスペースのページを開きます。
5. __「スペース」__ページで**「アプリケーション」**タブに移動します。
6. __「アプリケーション」____タブに、そのスペースにデプロイされているすべてのアプリケーションが表示されます。
オプションとして、アプリケーションを表す行の右端にあるメニューにアクセスして、アプリケーションを開始、再始動、停止、または削除できます。

また、アプリケーションの行を展開して、アプリケーションがバインドされているサービス・インスタンスを表示することもできます。

### すべての CFEE インスタンスにデプロイされているアプリケーションの表示
{: #view_global}

すべての CFEE インスタンスにデプロイされているアプリケーションを表示するには、以下のようにします。
1. メニュー・アイコン ![アカウント検査](img/HamburgerMenu.png "メニュー・アイコンを示す画面キャプチャー")>**「Cloud Foundry」**をクリックして、Cloud Foundry ダッシュボードを開きます。
2. 左ナビゲーション・ペインで**「エンタープライズ (Enterprise)」>「アプリケーション」**をクリックします。
ビュー内の表では、以下の情報が示されます。

| 要素   | 説明 |
|-----------|---------------|
| 名前 | アプリケーションの名前。 |
| インスタンス | アプリケーションのインスタンスの数。 |
| 環境 | アプリケーションがデプロイされている {{site.data.keyword.cfee_full}} 環境。 |
| 組織 | アプリケーションがデプロイされている組織。 |
| スペース | 別名が存在している CFEE インスタンスの組織。 |
| メモリー | アプリケーションで使用されているメモリーの量。 |
| 状況 | アプリケーションの状況。 |
{:caption="表 1. Cloud Foundry ダッシュボードのアプリケーション表の列" caption-side="top"}

オプションとして、アプリケーションを表す行の右端にあるメニューにアクセスして、アプリケーションを開始、再始動、停止、または削除できます。
アプリケーション、環境、組織、またはスペースのいずれかをクリックして、CFEE ユーザー・インターフェースの対応するページにナビゲートできます。

このビューでは、組織、スペース、アプリケーション名、あるいはその組み合わせでアプリケーションをグループ化できます。  この機能により、名前が違ったり、異なる CFEE 組織またはスペースにデプロイされたりしているが、同じ論理アプリケーション・エンティティーに対応しているアプリケーションを単一エンティティー・アプリケーションにまとめることができます。  例えば、より広範なプロジェクトのコンポーネントを表していたり、異なるデリバリー・ステージ (例えば、開発、テスト、実動) にデプロイされていたりするが、同じ論理エンティティーに属しているものとしてグループ化して表示したい各種アプリケーションが存在する場合があります。

アプリケーションをグループ化するには、ページの右上にある**「グループ」**ドロップダウンに移動します。
アプリケーションをグループ化すると、結果として生成される各グループは、表内で単一項目によって表されます。 該当する行を展開することで、そのグループに含まれているアプリケーションを表示できます。

このビューでは、以下のアクションを実行できます。
* 表列として表示されている任意のプロパティーで表内の項目をソートする。
* 行の右端にある別名の別名オーバーフロー・メニューにアクセスして、アプリケーションを特定の別名にバインドする。
* 別名 (行) を展開して、その別名にバインドされたすべてのアプリケーションを表示する。
* 行の右端にある別名のアプリケーション・オーバーフロー・メニューにアクセスして、アプリケーションを開始/停止する。
* 対応する CFEE、組織、またはスペースへのリンクをクリックして、CFEE、CFEE 組織、または CFEE スペースにナビゲートする。

## アプリケーション・マニフェスト
{: #appmanifest}

アプリケーション・マニフェストには、`cf push` コマンドに適用されるオプションが含まれています。 アプリケーション・マニフェストを使用することで、{{site.data.keyword.Bluemix_notm}} にアプリケーションをプッシュする度に指定する必要のあるデプロイメント詳細の数を減らすことができます。

アプリケーション・マニフェストでは、作成するアプリケーション・インスタンスの数、割り振るメモリー量とディスク割り当て量、その他の環境変数などのオプションを指定できます。 また、アプリケーション・マニフェストはアプリケーション・デプロイメントの自動化にも使用できます。 マニフェスト・ファイルのデフォルト名は `manifest.yml` です。

### マニフェスト・ファイルでサポートされるオプション

以下の表では、アプリケーション・マニフェスト・ファイルで使用可能な、サポートされているオプションを示しています。 `manifest.yml` 以外の異なるファイル名を使用することを選択する場合は、**-f** オプションを `cf push` コマンドと共に使用する必要があります。 以下の例では、`appManifest.yml` がファイル名です。

```
cf push -f appManifest.yml
```

| オプション | 説明 | 使用法または例 |
|:----------|:--------------|:---------------|
| **buildpack** | カスタム・ビルドパックの URL または名前。 | `buildpack:` *buildpack_URL* |
| **disk_quota** | アプリケーションに割り振られるディスク割り当て量。 デフォルト値は 1 G です。 | `disk_quota: 500M` |
| **domain** | {{site.data.keyword.Bluemix_notm}} 内のアプリケーションのドメイン・ネーム。 | `domain:` ng.bluemix.net |
| **host** | {{site.data.keyword.Bluemix_notm}} 内のアプリケーションのホスト名。 この値は {{site.data.keyword.Bluemix_notm}} 環境で固有でなければなりません。 | `host:` *host_name* |
| **name** | {{site.data.keyword.Bluemix_notm}} 内のアプリケーション名。 この値は {{site.data.keyword.Bluemix_notm}} 環境で固有でなければなりません。 | `name:` *appname* |
| **path** | アプリケーションのロケーション。 この値は相対パスまたは絶対パスとすることができます。 | `path:` *path_to_application* |
| **command** | アプリケーションのカスタム開始コマンド、またはスクリプト・ファイルの実行コマンド。 | `command:` *custom_command* `command:` *bash ./run.sh* |
| **memory** | アプリケーションに割り振るメモリー量。 デフォルト値は 1G です。 | `memory: 512M` |
| **instances** | アプリケーション用に作成されるインスタンスの数。 | `instances: 2` |
| **timeout** | アプリケーションの開始に使用される最大時間 (秒)。 デフォルト値は 60 秒です。 | `timeout: 80` |
| **no-route** | アプリケーションがバックグラウンドで実行されているだけであれば、そのアプリケーションに経路が割り当てられないようにするブール値。 デフォルト値は **false** です。 | `no-route: true` |
| **random-route** | アプリケーションにランダムな経路を割り当てるブール値。 デフォルト値は **false** です。 | `random-route: true` |
| **services** | アプリケーションにバインドするサービス。 | `services: - mysql_maptest` |
| **env** | アプリケーションのカスタム環境変数。 | `env: DEV_ENV: production` |
{: caption="表 2. マニフェスト YAML ファイルでサポートされるオプション" caption-side="top"}

### サンプル manifest.yml ファイル
{: #sample}

以下の例は、{{site.data.keyword.Bluemix_notm}} 内の組み込みコミュニティー Node.js ビルドパックを使用する Node.js アプリケーションのマニフェスト・ファイルを示しています。

```
---
- name: myNodejsapp
  memory: 256M
  disk_quota: 512M
  path: /dev/myNodejsApp
  buildpack: nodejs_buildpack
  host: nodejs001
  domain: mybluemix.net
  command: node app.js
  timeout: 80
  services:
  - mongo_8917
  env:
    env_type: production
```
{: codeblock}
