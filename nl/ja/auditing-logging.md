---

copyright:

  years: 2015, 2017, 2018

lastupdated: "2018-11-09"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}

# 監査とロギング
{: #auditing-logging}

{{site.data.keyword.cfee_full}} (CFEE) の監査機能とロギング機能により、管理者は CFEE インスタンスで発生したイベントを監査でき、開発者は Cloud Foundry アプリケーションから生成されたログ・イベントを追跡できます。

CFEE での監査とロギングは、IBM Cloud の Log Analysis サービスおよび Activity Tracker サービスとの統合によって可能になります。

## 監査
{: #auditing}

監査によって CFEE 管理者は CFEE インスタンスで発生した Cloud Foundry の監査可能なアクティビティーを追跡できます。こうしたアクティビティーには、ログイン、組織およびスペースの作成、ユーザーへのメンバーシップと役割の割り当て、アプリケーションのデプロイ、サービスのバインド、ドメイン構成などがあります。監査は、IBM Cloud の Activity Tracker サービスとの統合によって可能になります。CFEE 管理者が Activity Tracker サービスを選択すると、Cloud FOundry 内および CFEE コントロール・プレーンで実行されたアクションを表すイベントを受け取るように、そのサービスが自動的に構成されます。これらのイベントは、Activity Tracker サービス・インスタンスのユーザー・インターフェースで表示および管理できます。

CFEE インスタンスの監査を有効にするには、以下のようにします。

1. CFEE のユーザー・インターフェースを開き、左側のナビゲーション・ペインで**「操作」> 「監査」**項目に移動し、「ロギング」ページを開きます。
2. **「監査を有効にする (Enable auditing)」**をクリックし、IBM Cloud アカウントで使用可能な **Activity Tracker インスタンス**の 1 つを選択します。使用可能なインスタンスがない場合は、IBM Cloud カタログ内に新規 Activity Tracker インスタンスを作成するオプションが表示されます。
3.  ロギング・パーシスタンスが有効になると、構成の詳細がページに表示されます。この詳細に、構成の状況や Activity Tracker サービス・インスタンス自体へのリンクが含まれており、リンク先で監査イベントを表示して管理できます。

監査を無効にするには、**「監査を無効にする (Disable auditing)」**をクリックします。これにより、以前追加して構成した Activity tracker サービス・インスタンスが解除されます。このアクションでは Activity Tracker サービス・インスタンスは削除されません。

## ロギング・パーシスタンス
{: #logging}

Cloud Foundry イベントのロギングは、IBM Cloud の Log Analysis サービスとの統合によって可能になります。CFEE 管理者が Log Analysis サービスのインスタンスを選択すると、CFEE インスタンスから生成された Cloud Foundry ロギング・イベントを受け取って永続化するように、そのサービスが自動的に構成されます。これらのロギング・イベントは、Log Analysis サービス・インスタンスのユーザー・インターフェースで表示および管理できます。

CFEE インスタンスのロギングを有効にするには、以下のようにします。

1. ロギング・イベントを永続化する Log Analysis サービス・インスタンスにエディター、オペレーター、または管理者の役割を割り当てる [IAM アクセス・ポリシー](https://console.bluemix.net/iam/#/users)があることを確認します。
2. CFEE のユーザー・インターフェースを開き、左側のナビゲーション・ペインで**「操作」>「ロギング」**項目に移動し、「ロギング」ページを開きます。
3. **「パーシスタンスを有効にする (Enable persistence)」**をクリックし、IBM Cloud アカウントで使用可能な **Log Analysis インスタンス**の 1 つを選択します。使用可能なインスタンスがない場合、IBM Cloud カタログ内にインスタンスを作成するオプションが表示されます。
4. ロギング・パーシスタンスが有効になると、構成の詳細がページに表示されます。この詳細に、構成の状況や Log Analysis サービス・インスタンス自体へのリンクが含まれており、リンク先でロギング・イベントを表示して管理できます。

**警告:** ロギング・パーシスタンスを有効にするには、CFEE のコントロール・プレーンおよびセルに、中断を伴う再始動が必要になります。再始動中は、管理機能はすべて使用可能ですが、この CFEE インスタンスで実行されている一部のアプリケーションやサービスが使用不可になる場合があります。CFEE コンポーネントの状況は、再始動時に「ヘルス・チェック」ページに表示されます。再始動には約 20 分かかります。

ログ・パーシスタンスを無効にするには、**「ログ・パーシスタンスを無効にする (Disable log persistence)」**をクリックします。これにより、以前追加して構成したサービス・インスタンスが解除されます。このアクションでは、Log Analysis サービス・インスタンスは削除されません。

**注:** ログ・パーシスタンスを無効にしても、Cloud Foundry のロギング・イベントはまだ生成されます。CFEE インスタンスの外部に永続化されなくなるだけです。
